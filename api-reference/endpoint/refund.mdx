---
title: "Reembolsar Pagamento"
api: "POST https://carteira.nevermiss.com/v1/refund"
description: "Reembolsa um pagamento aprovado, devolvendo o valor ao pagador"
---

## Descrição

Reembolsa um pagamento aprovado. O valor **TOTAL** (incluindo taxa) é devolvido ao cliente, e o valor **LÍQUIDO** é deduzido do seu saldo.

<Warning>
**Operação irreversível**: Após processar o reembolso, não é possível desfazê-lo.
</Warning>

## Headers

<ParamField header="Authorization" type="string" required>
  Bearer token com sua API Key
</ParamField>

<ParamField header="Content-Type" type="string" required>
  Deve ser `application/json`
</ParamField>

## Body

<ParamField body="txid" type="string" required>
  ID da transação a ser reembolsada
</ParamField>

## Pré-requisitos

<AccordionGroup>
  <Accordion title="Transação deve ser do tipo payment" icon="check">
    Apenas pagamentos podem ser reembolsados, não saques
  </Accordion>
  
  <Accordion title="Status deve ser approved" icon="check">
    Só é possível reembolsar pagamentos já confirmados
  </Accordion>
  
  <Accordion title="Saldo suficiente" icon="wallet">
    Você deve ter saldo suficiente para cobrir o valor líquido
  </Accordion>
  
  <Accordion title="Não pode ter sido reembolsado" icon="rotate">
    Cada pagamento só pode ser reembolsado uma vez
  </Accordion>
</AccordionGroup>

## Response

<ResponseField name="success" type="boolean">
  Indica se a operação foi bem-sucedida
</ResponseField>

<ResponseField name="message" type="string">
  Mensagem de confirmação
</ResponseField>

<ResponseField name="refund" type="object">
  Detalhes do reembolso
  
  <Expandable title="properties">
    <ResponseField name="txid" type="string">
      ID da transação reembolsada
    </ResponseField>
    
    <ResponseField name="refundedAmount" type="number">
      Valor total devolvido ao cliente
    </ResponseField>
    
    <ResponseField name="feePaid" type="number">
      Taxa que você havia pago (perdida)
    </ResponseField>
    
    <ResponseField name="netDeduction" type="number">
      Valor deduzido do seu saldo
    </ResponseField>
    
    <ResponseField name="newBalance" type="number">
      Seu novo saldo após o reembolso
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>

```bash cURL
curl -X POST https://carteira.nevermiss.com/v1/refund \
  -H "Authorization: Bearer SUA_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{"txid": "ABC123XYZ"}'
```

```javascript Node.js
const response = await fetch('https://carteira.nevermiss.com/v1/refund', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer SUA_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    txid: 'ABC123XYZ'
  })
});

const refund = await response.json();
console.log(refund);
```

```python Python
import requests

response = requests.post(
    'https://carteira.nevermiss.com/v1/refund',
    headers={
        'Authorization': 'Bearer SUA_API_KEY',
        'Content-Type': 'application/json'
    },
    json={'txid': 'ABC123XYZ'}
)

refund = response.json()
print(refund)
```

```php PHP
<?php
$ch = curl_init('https://carteira.nevermiss.com/v1/refund');

curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Authorization: Bearer SUA_API_KEY',
    'Content-Type: application/json'
]);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    'txid' => 'ABC123XYZ'
]));
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$refund = curl_exec($ch);
curl_close($ch);

echo $refund;
?>
```

</RequestExample>

<ResponseExample>

```json Sucesso (200)
{
  "success": true,
  "message": "Reembolso processado com sucesso. O valor foi devolvido ao comprador e deduzido do seu saldo",
  "refund": {
    "txid": "ABC123XYZ",
    "refundedAmount": 49.90,
    "feePaid": 3.49,
    "netDeduction": 46.41,
    "newBalance": 140.98
  }
}
```

```json Erro - Saldo insuficiente (400)
{
  "error": "Bad Request",
  "message": "Insufficient balance to process refund"
}
```

```json Erro - Transação não encontrada (404)
{
  "error": "Not Found",
  "message": "Transaction not found or does not belong to you"
}
```

</ResponseExample>

## Como Funciona

<Steps>
  <Step title="Cliente recebe o valor total">
    O sistema devolve R$ 49,90 (valor total incluindo a taxa) ao cliente
  </Step>
  
  <Step title="Taxa não é reembolsada">
    A taxa de R$ 3,49 (6.99%) não é devolvida a você - é um custo da operação
  </Step>
  
  <Step title="Dedução do seu saldo">
    R$ 46,41 (valor líquido) é deduzido do seu saldo disponível
  </Step>
  
  <Step title="Status atualizado">
    O status da transação muda para `refunded`
  </Step>
</Steps>

<Note>
**Perda da taxa**: Ao reembolsar, você perde a taxa de 6.99% que foi cobrada na transação original. Esta taxa não é reembolsada.
</Note>

## Erros Comuns

| Código | Causa | Solução |
|--------|-------|---------|
| 400 | Saldo insuficiente | Certifique-se de ter saldo suficiente |
| 400 | Já foi reembolsado | Verifique o status da transação |
| 404 | Transação não encontrada | Confirme o txid |
| 500 | Erro ao processar | Entre em contato com suporte |
